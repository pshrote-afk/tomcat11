<!DOCTYPE HTML>
<html lang = 'en'>
<meta charset='utf-8'>
<head>
<title>AJAX Examples</title>
<style>
.modalMask
{
width:100%;
height:100%;
top:0;
left:0;
border:1px solid red;
background:gray;
position:fixed;
opacity:70%
}
.modalMaskDivision
{
width:400px;
min-width:200px;
height:300px;
min-height:300px;
background-color:blue;
position:fixed;
top:0;
left:0;
bottom:0;
right:0;
margin:auto;
border:2px solid white;
overflow:auto;
}
.closeButton
{
float:right;
padding:2px 7px;
cursor:pointer;
}

</style>
<script>
//foll. is a class
function Modal(cid)
{
objectAddress = this;
this.onOpen = null;
this.onClose = null;
var contentId = cid;
var contentReference = document.getElementById(cid);
var contentParentReference = contentReference.parentElement;
var contentIndex = 0;
while(contentIndex < contentParentReference.children.length)
{
if(contentReference==contentParentReference.children[contentIndex])
{
break;
}
contentIndex++;
}

var modalMask = document.createElement("div");
modalMask.classList.add("modalMask");
var modalMaskDivision = document.createElement("div");
modalMaskDivision.classList.add("modalMaskDivision");

var closeButtonSpan = document.createElement("span");
closeButtonSpan.classList.add("closeButton");
var closeButtonMarker = document.createTextNode("x");
closeButtonSpan.appendChild(closeButtonMarker);
modalMaskDivision.appendChild(closeButtonSpan);

contentReference.remove();
modalMaskDivision.appendChild(contentReference);
contentReference.style.display = contentReference.oldDisplay;

this.show = function(){
document.body.appendChild(modalMask);
document.body.appendChild(modalMaskDivision);
if(this.onOpen) this.onOpen();
};


closeButtonSpan.onclick = function(){
contentReference.style.display = 'none';
contentReference.remove();
modalMask.remove();
modalMaskDivision.remove();
if(contentParentReference.children.length == contentIndex)
{
contentParentReference.appendChild(contentReference);
}
else
{
contentParentReference.insertBefore(contentReference,contentParentReference.children[contentIndex]);
}
if(objectAddress.onClose) objectAddress.onClose();
};

modalMask.onclick = function(){
closeButtonSpan.click();
alert('bg got clicked. Closing window');
}


} //end of Modal function




function createModal1()
{
var modal = new Modal("ab");
modal.onOpen = function(){
alert('Modal ab opened');
};
modal.onClose = function(){
alert('Modal ab closed');
};
modal.show();
}


function initializeModal()
{
var allTags = document.getElementsByTagName("*");
var t;
for(var i=0;i<allTags.length;i++)
{
t=allTags[i];
if(t.hasAttribute("forModal"))
{
var forModal = t.getAttribute("forModal");
if(forModal=="true")
{
t.oldDisplay = t.style.display;
t.style.display='none';
}
}


}

}

window.addEventListener('load',initializeModal);
</script>
</head>
<body>


<button onclick='createModal1()'>
Create First Modal
</button>
<button onclick='createModal2()'>
Create Second Modal
</button>
<div id='ab' forModal="true">
God is great
</div>
<div id='pq' forModal="true">
Ujjain is the city of Gods
</div>
<br>
dwwd
</body>
</html>